<p><b>Dovetail URL:</b> {{url}}</p>

<p *ngIf="adzerkRequest">
  <b>Properties: <button (click)="onEdit()">Edit</button>
    {{adzerkRequest.placements[0].properties | json}}</b>
</p>

<form (ngSubmit)="onRun()" #reportForm="ngForm" *ngIf="adzerkRequest">
  <select [(ngModel)]="runner.iterations" ngControl="iterations">
    <option value="1">1</option>
    <option value="10">10</option>
    <option value="100">100</option>
    <option value="1000">1000</option>
  </select>
  <button type="submit">Run report</button>
</form>

<table>
  <tr>
    <th>Campaign</th>
    <th>Flight</th>
    <th>Creative</th>
    <th>Ad</th>
    <th>Count</th>
    <th>of {{runner.completed}}</th>
  </tr>
  <tbody *ngFor="#placement of report.placements; #i = index">
    <tr>
      <td colspan="6"><h1>{{placement.name}}</h1></td>
    </tr>
    <tr *ngFor="#adId of placementAdIds(i)" [ngClass]="{no_ad: !placement.ads[adId].adId}">
      <td [ngSwitch]="!placement.ads[adId].adId">
        <span *ngSwitchWhen="true">No campaign</span>
        <campaign-name [adData]="placement.ads[adId]" *ngSwitchWhen="false"></campaign-name>
      </td>
      <td [ngSwitch]="!placement.ads[adId].adId">
        <span *ngSwitchWhen="true">No flight</span>
        <flight-name [adData]="placement.ads[adId]" *ngSwitchWhen="false"></flight-name>
      </td>
      <td [ngSwitch]="!placement.ads[adId].adId">
        <span *ngSwitchWhen="true">No creative</span>
        <creative-name [adData]="placement.ads[adId]" *ngSwitchWhen="false"></creative-name>
      </td>
      <td [ngSwitch]="!placement.ads[adId].adId">
        <span *ngSwitchWhen="true">No ad</span>
        <span *ngSwitchWhen="false">{{placement.ads[adId].adId}}</span>
      </td>
      <td>{{placement.ads[adId].count}}</td>
      <td>({{(placement.ads[adId].count / runner.completed) | percent:'1.0-1'}})</td>
    </tr>
  </tbody>
</table>
